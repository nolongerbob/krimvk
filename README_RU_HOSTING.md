# –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ —Ä–æ—Å—Å–∏–π—Å–∫–∏–π —Ö–æ—Å—Ç–∏–Ω–≥

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: Yandex Cloud

**–ü–æ—á–µ–º—É Yandex Cloud:**
- ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–æ—Å—Å–∏–π—Å–∫–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ 152-–§–ó (–¥–∞–Ω–Ω—ã–µ –≤ –†–§)
- ‚úÖ Managed PostgreSQL (–∞–≤—Ç–æ–±—ç–∫–∞–ø—ã)
- ‚úÖ Object Storage (S3-—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π)
- ‚úÖ CDN –¥–ª—è —Å—Ç–∞—Ç–∏–∫–∏
- ‚úÖ –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å

**–°—Ç–æ–∏–º–æ—Å—Ç—å:** ~3500-4500‚ÇΩ/–º–µ—Å—è—Ü

## üìã –ü–ª–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–∏

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ (1-2 –¥–Ω—è)

1. **–°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç Yandex Cloud**
   - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–∞ cloud.yandex.ru
   - –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞

2. **–°–æ–∑–¥–∞—Ç—å –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É:**
   - Managed PostgreSQL
   - Object Storage bucket
   - Container Registry
   - VPS –∏–ª–∏ Cloud Run

3. **–≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö:**
   ```bash
   ./scripts/migrate-to-yandex.sh
   ```

### 2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞ (1 –¥–µ–Ω—å)

1. **–ó–∞–º–µ–Ω–∏—Ç—å Vercel Blob –Ω–∞ Yandex Storage:**
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `lib/storage.ts`
   - –û–±–Ω–æ–≤–∏—Ç–µ –≤—Å–µ API routes –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤
   - –°–º. –ø—Ä–∏–º–µ—Ä: `app/api/admin/water-quality/documents/upload-yandex.example.ts`

2. **–û–±–Ω–æ–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
   - `DATABASE_URL` ‚Üí Yandex PostgreSQL
   - –î–æ–±–∞–≤–∏—Ç—å `YANDEX_STORAGE_*` –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

### 3. –î–µ–ø–ª–æ–π (1 –¥–µ–Ω—å)

**–í–∞—Ä–∏–∞–Ω—Ç A: Docker –Ω–∞ VPS**
```bash
docker-compose -f docker/docker-compose.yml up -d
```

**–í–∞—Ä–∏–∞–Ω—Ç B: Cloud Run**
```bash
# –ß–µ—Ä–µ–∑ GitHub Actions (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
# –ò–ª–∏ –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ –∫–æ–Ω—Å–æ–ª—å Yandex Cloud
```

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–æ–º–µ–Ω–∞ (1 —á–∞—Å)

**‚úÖ –î–æ–º–µ–Ω —Å nic.ru –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å!**

1. **–í–∞—Ä–∏–∞–Ω—Ç 1 (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å DNS-—Å–µ—Ä–≤–µ—Ä—ã Yandex Cloud
   - –°–æ–∑–¥–∞–π—Ç–µ DNS-–∑–æ–Ω—É –≤ Yandex Cloud
   - –í nic.ru —É–∫–∞–∂–∏—Ç–µ DNS-—Å–µ—Ä–≤–µ—Ä—ã –æ—Ç Yandex

2. **–í–∞—Ä–∏–∞–Ω—Ç 2:** DNS-–∑–∞–ø–∏—Å–∏ –≤ nic.ru
   - A –∑–∞–ø–∏—Å—å: `@` ‚Üí IP —Å–µ—Ä–≤–µ—Ä–∞
   - CNAME: `www` ‚Üí –¥–æ–º–µ–Ω

3. SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ Yandex –∏–ª–∏ Let's Encrypt)

**–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:** —Å–º. `docs/DOMAIN_NIC_RU_SETUP.md`

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
‚îú‚îÄ‚îÄ docker/
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile              # –û–±—Ä–∞–∑ –¥–ª—è –¥–µ–ø–ª–æ—è
‚îÇ   ‚îî‚îÄ‚îÄ docker-compose.yml      # –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
‚îú‚îÄ‚îÄ docs/
‚îÇ   ‚îú‚îÄ‚îÄ MIGRATION_RU_HOSTING.md # –û–±—â–∏–π –ø–ª–∞–Ω
‚îÇ   ‚îî‚îÄ‚îÄ YANDEX_CLOUD_SETUP.md   # –î–µ—Ç–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
‚îú‚îÄ‚îÄ lib/
‚îÇ   ‚îî‚îÄ‚îÄ storage.ts              # –ú–æ–¥—É–ª—å –¥–ª—è Yandex Storage
‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îî‚îÄ‚îÄ migrate-to-yandex.sh    # –°–∫—Ä–∏–ø—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
‚îî‚îÄ‚îÄ .github/workflows/
    ‚îî‚îÄ‚îÄ deploy-yandex.yml       # CI/CD –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–µ–ø–ª–æ—è
```

## üîß –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

1. **–ü—Ä–æ—á–∏—Ç–∞–π—Ç–µ:** `docs/YANDEX_CLOUD_SETUP.md`
2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É** –≤ Yandex Cloud
3. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é:** `./scripts/migrate-to-yandex.sh`
4. **–û–±–Ω–æ–≤–∏—Ç–µ –∫–æ–¥** –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤
5. **–ó–∞–¥–µ–ø–ª–æ–π—Ç–µ:** —á–µ—Ä–µ–∑ Docker –∏–ª–∏ Cloud Run

## üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å

### –í–∞—Ä–∏–∞–Ω—Ç 1: Yandex Cloud (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

| –°–µ—Ä–≤–∏—Å | –°—Ç–æ–∏–º–æ—Å—Ç—å/–º–µ—Å—è—Ü |
|--------|----------------|
| Managed PostgreSQL | ~1500‚ÇΩ |
| Object Storage | ~500‚ÇΩ |
| VPS/Cloud Run | ~1500‚ÇΩ |
| CDN | ~500‚ÇΩ |
| **–ò—Ç–æ–≥–æ** | **~4000‚ÇΩ** |

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ì–∏–±—Ä–∏–¥ (—ç–∫–æ–Ω–æ–º–∏—è)

| –°–µ—Ä–≤–∏—Å | –ü—Ä–æ–≤–∞–π–¥–µ—Ä | –°—Ç–æ–∏–º–æ—Å—Ç—å/–º–µ—Å—è—Ü |
|--------|-----------|----------------|
| Managed PostgreSQL | Selectel | ~1000‚ÇΩ |
| Object Storage | Yandex Cloud | ~500‚ÇΩ |
| VPS | Timeweb | ~1000‚ÇΩ |
| CDN | Yandex Cloud | ~500‚ÇΩ |
| **–ò—Ç–æ–≥–æ** | | **~3000‚ÇΩ** |

### –í–∞—Ä–∏–∞–Ω—Ç 3: VPS —Å PostgreSQL (–±—é–¥–∂–µ—Ç–Ω—ã–π)

| –°–µ—Ä–≤–∏—Å | –°—Ç–æ–∏–º–æ—Å—Ç—å/–º–µ—Å—è—Ü |
|--------|----------------|
| VPS —Å PostgreSQL | ~1000‚ÇΩ |
| Object Storage | ~500‚ÇΩ |
| **–ò—Ç–æ–≥–æ** | **~1500‚ÇΩ** |
| ‚ö†Ô∏è + –≤–∞—à–µ –≤—Ä–µ–º—è –Ω–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ |

**–ü–æ–¥—Ä–æ–±–Ω–µ–µ:** —Å–º. `docs/DATABASE_HOSTING_OPTIONS.md`

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

- –í—Å–µ –¥–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –≤ –†–§
- –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ 152-–§–ó
- –ù–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤ VPN
- –ë—ã—Å—Ç—Ä–∞—è —Ä–∞–±–æ—Ç–∞ –∏–∑ –†–æ—Å—Å–∏–∏

## üéØ –°—Ç—Ä–∞—Ç–µ–≥–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:** –°–Ω–∞—á–∞–ª–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –ª–∏—á–Ω–æ–º Yandex Cloud –∞–∫–∫–∞—É–Ω—Ç–µ, –ø–æ—Ç–æ–º –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—å –Ω–∞ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–π.

**–ü–æ—á–µ–º—É:**
- ‚úÖ –ú–æ–∂–Ω–æ —Å–ø–æ–∫–æ–π–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –±–µ–∑ —Ä–∏—Å–∫–∞
- ‚úÖ –ò–∑—É—á–∏—Ç—å –≤—Å–µ –Ω—é–∞–Ω—Å—ã
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–µ—Ä–µ–¥ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–æ–º
- ‚úÖ –ú–µ–Ω—å—à–µ —Å—Ç—Ä–µ—Å—Å–∞

**–ü–æ–¥—Ä–æ–±–Ω—ã–π –ø–ª–∞–Ω:** —Å–º. `docs/MIGRATION_STRATEGY.md`

## üÜò –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–Ω—É—Ç –≤–æ–ø—Ä–æ—Å—ã:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `docker logs krimvk`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ health endpoint: `https://yourdomain.ru/api/health`
3. –°–º. –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –≤ `docs/`

