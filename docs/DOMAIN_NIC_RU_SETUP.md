# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–æ–º–µ–Ω–∞ —Å nic.ru –Ω–∞ —Ä–æ—Å—Å–∏–π—Å–∫–∏–π —Ö–æ—Å—Ç–∏–Ω–≥

## ‚úÖ –î–∞, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–æ–º–µ–Ω —Å nic.ru!

**–í–∞–∂–Ω–æ –ø–æ–Ω–∏–º–∞—Ç—å:**
- –î–æ–º–µ–Ω –æ—Å—Ç–∞–µ—Ç—Å—è –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –Ω–∞ nic.ru (–≤—ã –µ–≥–æ –≤–ª–∞–¥–µ–ª–µ—Ü)
- DNS-–∑–∞–ø–∏—Å–∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –≤ nic.ru –∏ —É–∫–∞–∑—ã–≤–∞—é—Ç –Ω–∞ –≤–∞—à —Ö–æ—Å—Ç–∏–Ω–≥
- –≠—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ç–æ—Ä –∏ —Ö–æ—Å—Ç–∏–Ω–≥ –º–æ–≥—É—Ç –±—ã—Ç—å —Ä–∞–∑–Ω—ã–º–∏

## üìã –ü–æ—à–∞–≥–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å DNS-—Å–µ—Ä–≤–µ—Ä—ã —Ö–æ—Å—Ç–∏–Ω–≥–∞ (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

#### –î–ª—è Yandex Cloud:

1. **–í Yandex Cloud —Å–æ–∑–¥–∞–π—Ç–µ DNS-–∑–æ–Ω—É:**
   - –ó–∞–π–¥–∏—Ç–µ –≤ Yandex Cloud Console
   - Cloud DNS ‚Üí –°–æ–∑–¥–∞—Ç—å –∑–æ–Ω—É
   - –ò–º—è: `krimvk.ru` (–≤–∞—à –¥–æ–º–µ–Ω)
   - –ü–æ–ª—É—á–∏—Ç–µ DNS-—Å–µ—Ä–≤–µ—Ä—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä: `ns1.yandexcloud.net`, `ns2.yandexcloud.net`)

2. **–í nic.ru:**
   - –ó–∞–π–¥–∏—Ç–µ –≤ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ–º–µ–Ω–æ–º
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí DNS-—Å–µ—Ä–≤–µ—Ä—ã
   - –í—ã–±–µ—Ä–∏—Ç–µ "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å DNS-—Å–µ—Ä–≤–µ—Ä—ã —Ö–æ—Å—Ç–∏–Ω–≥–∞"
   - –í–≤–µ–¥–∏—Ç–µ DNS-—Å–µ—Ä–≤–µ—Ä—ã –æ—Ç Yandex Cloud:
     ```
     ns1.yandexcloud.net
     ns2.yandexcloud.net
     ```
   - –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ

3. **–í Yandex Cloud DNS-–∑–æ–Ω–µ –¥–æ–±–∞–≤—å—Ç–µ –∑–∞–ø–∏—Å–∏:**
   - **A –∑–∞–ø–∏—Å—å:**
     ```
     –ò–º—è: @
     –¢–∏–ø: A
     –ó–Ω–∞—á–µ–Ω–∏–µ: [IP –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ –∏–ª–∏ Cloud Run]
     TTL: 300
     ```
   
   - **CNAME –∑–∞–ø–∏—Å—å –¥–ª—è www:**
     ```
     –ò–º—è: www
     –¢–∏–ø: CNAME
     –ó–Ω–∞—á–µ–Ω–∏–µ: @
     TTL: 300
     ```

4. **–ü–æ–¥–æ–∂–¥–∏—Ç–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è DNS (5-30 –º–∏–Ω—É—Ç)**

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å DNS-–∑–∞–ø–∏—Å–∏ –≤ nic.ru

–ï—Å–ª–∏ –Ω–µ —Ö–æ—Ç–∏—Ç–µ –º–µ–Ω—è—Ç—å DNS-—Å–µ—Ä–≤–µ—Ä—ã:

1. **–í nic.ru:**
   - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ–º–µ–Ω–æ–º ‚Üí DNS-–∑–∞–ø–∏—Å–∏
   - –î–æ–±–∞–≤—å—Ç–µ –∑–∞–ø–∏—Å–∏:

   **A –∑–∞–ø–∏—Å—å (–æ—Å–Ω–æ–≤–Ω–æ–π –¥–æ–º–µ–Ω):**
   ```
   –ò–º—è: @
   –¢–∏–ø: A
   –ó–Ω–∞—á–µ–Ω–∏–µ: [IP –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞]
   TTL: 3600
   ```

   **CNAME –∑–∞–ø–∏—Å—å (www):**
   ```
   –ò–º—è: www
   –¢–∏–ø: CNAME
   –ó–Ω–∞—á–µ–Ω–∏–µ: [–≤–∞—à –¥–æ–º–µ–Ω].ru
   TTL: 3600
   ```

   **–ò–ª–∏ A –∑–∞–ø–∏—Å—å –¥–ª—è www:**
   ```
   –ò–º—è: www
   –¢–∏–ø: A
   –ó–Ω–∞—á–µ–Ω–∏–µ: [IP –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞]
   TTL: 3600
   ```

2. **–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è**

## üîç –ö–∞–∫ —É–∑–Ω–∞—Ç—å IP —Å–µ—Ä–≤–µ—Ä–∞?

### –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ VPS:
```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
curl ifconfig.me
# –ò–ª–∏
hostname -I
```

### –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Yandex Cloud Run:
1. –ó–∞–π–¥–∏—Ç–µ –≤ Cloud Run
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ URL —Å–µ—Ä–≤–∏—Å–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `krimvk-xxx.website.yandexcloud.net`)
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–æ—Ç URL –∫–∞–∫ CNAME, –∏–ª–∏ –ø–æ–ª—É—á–∏—Ç–µ IP —á–µ—Ä–µ–∑:
```bash
nslookup krimvk-xxx.website.yandexcloud.net
```

### –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Load Balancer:
- –í Yandex Cloud —Å–æ–∑–¥–∞–π—Ç–µ Application Load Balancer
- –ü–æ–ª—É—á–∏—Ç–µ IP –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫–∞
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–æ—Ç IP –≤ A-–∑–∞–ø–∏—Å–∏

## üîí SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):

**Yandex Cloud:**
- Application Load Balancer –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞–µ—Ç SSL –æ—Ç Let's Encrypt
- –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Cloud Run —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º SSL

**VPS:**
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ certbot
sudo apt install certbot python3-certbot-nginx

# –ü–æ–ª—É—á–∏—Ç–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
sudo certbot --nginx -d krimvk.ru -d www.krimvk.ru
```

### –†—É—á–Ω–æ–π:
- –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –≤ Yandex Cloud Certificate Manager
- –ü—Ä–∏–≤—è–∂–∏—Ç–µ –∫ Load Balancer –∏–ª–∏ Cloud Run

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ DNS-–∑–∞–ø–∏—Å–∏:**
   ```bash
   # –ü—Ä–æ–≤–µ—Ä–∫–∞ A –∑–∞–ø–∏—Å–∏
   dig krimvk.ru A
   
   # –ò–ª–∏ —á–µ—Ä–µ–∑ –æ–Ω–ª–∞–π–Ω-—Å–µ—Ä–≤–∏—Å
   # https://dnschecker.org/
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å:**
   ```bash
   curl -I https://krimvk.ru
   ```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ SSL:**
   ```bash
   # –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å —Å—Ç–∞—Ç—É—Å 200
   curl https://krimvk.ru/api/health
   ```

## ‚è±Ô∏è –í—Ä–µ–º—è —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è DNS

- **–û–±—ã—á–Ω–æ:** 5-30 –º–∏–Ω—É—Ç
- **–ú–∞–∫—Å–∏–º—É–º:** –¥–æ 48 —á–∞—Å–æ–≤ (—Ä–µ–¥–∫–æ)
- **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:** https://dnschecker.org/

## üéØ –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è Yandex Cloud Run

–ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Cloud Run, –ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Load Balancer:

1. **–°–æ–∑–¥–∞–π—Ç–µ Application Load Balancer:**
   - Target Group ‚Üí –≤–∞—à Cloud Run —Å–µ—Ä–≤–∏—Å
   - HTTP Listener ‚Üí –ø–æ—Ä—Ç 80
   - HTTPS Listener ‚Üí –ø–æ—Ä—Ç 443 (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π SSL)

2. **–ü–æ–ª—É—á–∏—Ç–µ IP –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫–∞**

3. **–í nic.ru –¥–æ–±–∞–≤—å—Ç–µ A –∑–∞–ø–∏—Å—å:**
   ```
   @ ‚Üí [IP –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫–∞]
   ```

## üìù –ü—Ä–∏–º–µ—Ä –¥–ª—è VPS

–ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ VPS —Å Nginx:

1. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ Nginx:**
   ```nginx
   server {
       listen 80;
       server_name krimvk.ru www.krimvk.ru;
       
       location / {
           proxy_pass http://localhost:3000;
           proxy_http_version 1.1;
           proxy_set_header Upgrade $http_upgrade;
           proxy_set_header Connection 'upgrade';
           proxy_set_header Host $host;
           proxy_cache_bypass $http_upgrade;
       }
   }
   ```

2. **–ü–æ–ª—É—á–∏—Ç–µ SSL:**
   ```bash
   sudo certbot --nginx -d krimvk.ru -d www.krimvk.ru
   ```

3. **–í nic.ru –¥–æ–±–∞–≤—å—Ç–µ A –∑–∞–ø–∏—Å—å:**
   ```
   @ ‚Üí [IP –≤–∞—à–µ–≥–æ VPS]
   ```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

1. **–î–æ–º–µ–Ω –æ—Å—Ç–∞–µ—Ç—Å—è –Ω–∞ nic.ru** - –≤—ã –µ–≥–æ –≤–ª–∞–¥–µ–ª–µ—Ü
2. **DNS-–∑–∞–ø–∏—Å–∏ —É–∫–∞–∑—ã–≤–∞—é—Ç –Ω–∞ —Ö–æ—Å—Ç–∏–Ω–≥** - —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ
3. **SSL –ø–æ–ª—É—á–∞–µ—Ç —Ö–æ—Å—Ç–∏–Ω–≥** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–ª–∏ —á–µ—Ä–µ–∑ Let's Encrypt
4. **–ú–æ–∂–Ω–æ –º–µ–Ω—è—Ç—å —Ö–æ—Å—Ç–∏–Ω–≥** - –ø—Ä–æ—Å—Ç–æ –æ–±–Ω–æ–≤–∏—Ç–µ DNS-–∑–∞–ø–∏—Å–∏

## üÜò –ü—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### –î–æ–º–µ–Ω –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è:
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ DNS-–∑–∞–ø–∏—Å–∏: `dig krimvk.ru`
- –ü–æ–¥–æ–∂–¥–∏—Ç–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è DNS (–¥–æ 48 —á–∞—Å–æ–≤)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω: `curl http://[IP]`

### SSL –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ—Ä—Ç 443 –æ—Ç–∫—Ä—ã—Ç
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Load Balancer
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç: `openssl s_client -connect krimvk.ru:443`

### www –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
- –î–æ–±–∞–≤—å—Ç–µ CNAME –∑–∞–ø–∏—Å—å –¥–ª—è www
- –ò–ª–∏ –¥–æ–±–∞–≤—å—Ç–µ –æ—Ç–¥–µ–ª—å–Ω—É—é A –∑–∞–ø–∏—Å—å –¥–ª—è www

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

- **nic.ru:** –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ –¥–æ–º–µ–Ω–∞–º
- **Yandex Cloud:** –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–µ
- **–í–∞—à —Ö–æ—Å—Ç–∏–Ω–≥:** –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ —Å–µ—Ä–≤–µ—Ä—É

–í—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞! üéâ

